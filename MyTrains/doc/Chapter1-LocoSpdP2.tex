\newpage
\section{LocoSpdP2}\index{LocoSpdP2}\index{Speed}

\underline{Description:}

This \gls{Command} sets the locomotive's speed in the range 0 to 127. 0 means inertial stop and 1 means emergency stop. Other values mean increasing speed.

\underline{Protocol:}

2

\underline{Group:}

6-Byte Message

\underline{Opcode:}

OPC\_D4\_GROUP (unofficial mnemonic)

\underline{Type:}

\gls{Command}

\underline{Encoding:} 

Byte 0:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
1 & 1 & 0 & 1 & 0 & 1 & 0 & 0\\
\hline
\end{tabular}
& 0xD4 & Opcode.\\
\end{tabular}

Byte 1:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & 0 & 1 & 0 & 0 & d2 & d1 & d0\\
\hline
\end{tabular}
& $<$SLOTP$>$ & Bits d2 to d0 contain the slot page number in the range 0x0 to 0x7.\\
\end{tabular}

Byte 2:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & n & n & n & n & n & n & n\\
\hline
\end{tabular}
& $<$SLOT\#$>$ & Slot number in the range 0x00 to 0x77.\\
\end{tabular}

Byte 3:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & 0 & 0 & 0 & 0 & 1 & 0 & 0\\
\hline
\end{tabular}
& 0x04 & Subcode.\\
\end{tabular}

Byte 4:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & n & n & n & n & n & n & n\\
\hline
\end{tabular}
& $<$SPD$>$ & Locomotive speed in the range 0x00 to 0x7F. \\
\end{tabular}

Byte 5:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & n & n & n & n & n & n & n\\
\hline
\end{tabular}
& $<$CHK$>$ & Checksum.\\
\end{tabular}

\underline{Response:} 

None.

\underline{Signature:}

Byte 0:

\begin{tabular}{p{0.4\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
1 & 1 & 0 & 1 & 0 & 1 & 0 & 0\\
\hline
\end{tabular}
& 0xD4 \\
\end{tabular}

Byte 1:

\begin{tabular}{p{0.4\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & 0 & 1 & 0 & 0 & $\times$ & $\times$ & $\times$\\
\hline
\end{tabular}
&  \\
\end{tabular}

Byte 3:

\begin{tabular}{p{0.4\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & 0 & 0 & 0 & 0 & 1 & 0 & 0\\
\hline
\end{tabular}
& 0x04\\
\end{tabular}

\underline{Notes:} 

This \gls{Command} was identified in the output from the iTrain commercial model railway control application. It has not been made to work outside of the original context. It is included in this manual as the ``missing link" information that enables it to function may be found in the future. Until that time use the D5 Group commands for protocol 2 control.

\rule{15.1cm}{0.4pt}
