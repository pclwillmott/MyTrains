\newpage
\subsection{SwReq}

\underline{Description:}

Command a turnout controller to a specified state. *** CHECK THIS ***

\underline{Group:}

4-Byte Message

\underline{Opcode:}

OPC\_SW\_REQ

\underline{Type:}

Command

\underline{Encoding:} 

Byte 0:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
1 & 0 & 1 & 1 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}
& 0xB0 & Opcode.\\
\end{tabular}

Byte 1:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & d6 & d5 & d4 & d3 & d2 & d1 & d0\\
\hline
\end{tabular}
& $<$SW1$>$ & Switch address A6 to A0.\\
\end{tabular}

\begin{tabular}{p{0.05\linewidth} p{0.6\linewidth}} 
d6 & A6.\\
d5 & A5.\\
d4 & A4.\\
d3 & A3.\\
d2 & A2.\\
d1 & A1.\\
d0 & A0.\\
\end{tabular}

Byte 2:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & 0 & d5 & d4 & d3 & d2 & d1 & d0\\
\hline
\end{tabular}
& $<$SW2$>$ & Switch address A10 to A7 and switch control bits.\\
\end{tabular}

\begin{tabular}{p{0.05\linewidth} p{0.6\linewidth}} 
d5 & Direction. 1 means closed/green, and 0 means thrown/red.\\
d4 & Output. 1 means on, and 0 means off.\\
d3 & A10.\\
d2 & A9.\\
d1 & A8.\\
d0 & A7.\\
\end{tabular}

Byte 3:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & n & n & n & n & n & n & n\\
\hline
\end{tabular}
& $<$CHK$>$ & Checksum.
\end{tabular}

\underline{Response:} 

\textbf{Ack} if command failed, otherwise no response.

\begin{tabular}{p{0.10\linewidth} p{0.10\linewidth} p{0.40\linewidth}}
\underline{$<$LOPC$>$} & \underline{$<$ACK1$>$} & \underline{Meaning}\\
0x30 & 0x00 & Command failed.\\
\end{tabular}

\underline{Signature:}

Byte 0:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
1 & 0 & 1 & 1 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}
& 0xB0 & \\
\end{tabular}

Byte 2:

\begin{tabular}{p{0.4\linewidth} p{0.15\linewidth} p{0.38\linewidth}} 

\begin{tabular}{|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|p{0.3cm}|}
\hline
0 & 0 & $\times$ & $\times$ & $\times$ & $\times$ & $\times$ & $\times$\\
\hline
\end{tabular}
& \\
\end{tabular}

\underline{Notes:} 

The on power on the command station sends a sequence of OPC\_SW\_REQ messages with the following values of SW1 and SW2:

\begin{tabular}{l l l}
\underline{SW1} & \underline{SW2} & \underline{Purpose}\\
0x78 & 0x27\\
0x79 & 0x27\\
0x7A & 0x27\\
0x7B & 0x27\\
0x78 & 0x07 & Interrogate all PM4 inputs?\\
0x79 & 0x07 & Interrogate all BDL16 input reports?\\
0x7A & 0x07 & Interrogate all SE8 input reports?\\
0x7B & 0x07 & Interrogate all DS64 input reports.\\
\end{tabular}

\rule{15.1cm}{0.4pt}
